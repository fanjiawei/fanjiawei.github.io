<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="swBrUjhd6H"/>
    <title>Jevi|《编写可维护的Javascript》笔记</title>
    <meta name="description" content="Jevi的博客，Jevi是一个程序员，会写前端，也会写java后端.
">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="/css/default.css" rel="stylesheet" type="text/css">
    <link href="/css/highlight/ocean.css" rel="stylesheet" type="text/css">
    <link href="/css/baidu-cse-default.css" rel="stylesheet" type="text/css">
</head>

<body>
<aside class="nav-side">
    <header>
        <img src="/images/psb.jpeg" alt="img"/>
        <h1>Jevi</h1>
    </header>
    <nav>
        <ul>
            <li>
                <a href="/">文章</a>
            </li>
            <li>
                <a href="/about.html">关于</a>
            </li>
            <li>
                <a href="/doc.html">文档</a>
            </li>
        </ul>
    </nav>
</aside>
<main class="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">《编写可维护的Javascript》笔记</h1>
        <p class="post-meta">
            <time datetime="2017-02-07 00:00:00 +0000" itemprop="datePublished">2017年02月07日</time>
        </p>
    </header>

    <div class="post-content" itemprop="articleBody">
        <h2 id="1编程风格">1、编程风格</h2>
<p>为了使代码易于维护，团队中所有人都有必要按照一个规范去写代码。
具体有下面规范：</p>

<ul>
  <li>缩进层级，推荐4个空格。</li>
  <li>行尾保留分号。</li>
  <li>行最长长度，推荐80个字符。</li>
  <li>换行，符号永远在后面。</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">//判断条件第二行前面有8个空格（两个缩进）</span>
<span class="k">if</span><span class="p">(</span><span class="nx">isLast</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">location</span><span class="p">.</span><span class="nx">hostname</span> <span class="o">===</span> <span class="s1">'www.example.com'</span> <span class="o">&amp;&amp;</span>
        <span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">===</span> <span class="s2">"http"</span><span class="p">){</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//换行后等号后面对齐</span>
<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">value1</span> <span class="o">+</span> <span class="nx">value2</span> <span class="o">+</span> <span class="nx">value3</span> <span class="o">+</span> <span class="nx">value4</span> <span class="o">+</span> <span class="nx">value5</span> <span class="o">+</span>
          <span class="nx">value6</span><span class="p">;</span>
</code></pre>
</div>
<ul>
  <li>空行</li>
</ul>

<blockquote>
  <p>在方法之间
在方法中局部变量和第一条语句之间
在多行和单行注释之前
在方法内的逻辑片段之间插入空行</p>
</blockquote>

<ul>
  <li>变量命名规范，推荐驼峰命名法，是一个名词。</li>
  <li>方法命名规范，推荐驼峰命名法，动词打头。</li>
</ul>

<blockquote>
  <table>
    <thead>
      <tr>
        <th>动词</th>
        <th>含义</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>can</td>
        <td>函数返回一个boolean</td>
      </tr>
      <tr>
        <td>has</td>
        <td>函数返回一个boolean</td>
      </tr>
      <tr>
        <td>is</td>
        <td>函数返回一个boolean</td>
      </tr>
      <tr>
        <td>get</td>
        <td>函数返回一个非boolean</td>
      </tr>
      <tr>
        <td>set</td>
        <td>函数用来保存一个值</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<ul>
  <li>常量，全大写，用_标识分割单词，例如MAX_COUNT</li>
  <li>花括号风格，指花括号起始与结束应该如何摆放，推荐下面写法。</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="kc">true</span><span class="p">){</span>
   <span class="c1">//do something</span>
<span class="p">}</span>
</code></pre>
</div>
<ul>
  <li>类，首字母大写，例如Person</li>
  <li>string，推荐用双引号，多行文本不推荐下面的写法</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">longString</span> <span class="o">=</span> <span class="s2">"Here's the store, of a man \
named Brady."</span><span class="p">;</span>

<span class="c1">//请使用下面的代码代替上面写法</span>
<span class="kd">var</span> <span class="nx">longString</span> <span class="o">=</span> <span class="s2">"here's the store, of a man"</span> <span class="o">+</span>
                 <span class="s2">"named Brady"</span><span class="p">;</span>
</code></pre>
</div>

<ul>
  <li>数字</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">//整数</span>
<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="c1">//小数</span>
<span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="mf">10.00</span><span class="p">;</span>

<span class="c1">//不推荐的小数写法，没有小数部分</span>
<span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="mi">10</span><span class="p">.;</span>

<span class="c1">//不推荐的小数写法，没有整数部分</span>
<span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="p">.</span><span class="mi">8</span><span class="p">;</span>

<span class="c1">//不推荐的写法，八进制已经被ECMA弃用了，现在还能用是为了向旧代码兼容</span>
<span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">010</span><span class="p">;</span>

<span class="c1">//十六进制写法</span>
<span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="mh">0xA2</span><span class="p">;</span>

<span class="c1">//科学计数法</span>
<span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e23</span><span class="p">;</span>
</code></pre>
</div>

<ul>
  <li>null</li>
</ul>

<blockquote>
  <p>在下列场景中使用</p>

  <ul>
    <li>用来初始化一个可能是object的变量</li>
    <li>用来和一个已经初始化的变量比较，这个变量可以是也可以不是一个对象</li>
    <li>当函数的参数期望是对象时，用作参数传入</li>
    <li>当函数的返回值期望是对象时，用作返回值传出</li>
  </ul>

  <p>在下列场景中不使用</p>

  <ul>
    <li>不要使用null来检测是否传入了某个参数</li>
    <li>不要用null来检测一个未初始化的变量</li>
  </ul>
</blockquote>

<ul>
  <li>undefined, 尽量避免接触，如果一个变量可能被赋值object，请初始化为null</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span> <span class="o">===</span> <span class="kc">null</span><span class="p">);</span>  <span class="c1">//true</span>
</code></pre>
</div>

<ul>
  <li>object</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="s2">"三国演义"</span><span class="p">,</span>
    <span class="na">author</span><span class="p">:</span> <span class="s2">"罗贯中"</span>
<span class="p">}</span>
</code></pre>
</div>

<ul>
  <li>数组</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"red"</span><span class="p">,</span> <span class="s2">"green"</span><span class="p">,</span> <span class="s2">"blud"</span><span class="p">];</span>
</code></pre>
</div>

<h2 id="2注释">2、注释</h2>
<h3 id="单行注释">单行注释</h3>
<p>单行注释应该应用于解释后面的一段或者一行代码</p>

<ul>
  <li>之前空一行</li>
  <li>与下面的代码保持一致的缩进</li>
  <li>只能有一行，如果注释有多行，请使用多行注释</li>
  <li>如果注释的是代码，可以有多行</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
    
    <span class="c1">// 这是注释，上面空一行，与下面代码缩进一致</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// 用于代码的注释</span>
<span class="c1">// if (condition) {</span>
<span class="c1">//     doSomething();</span>
<span class="c1">// }</span>
</code></pre>
</div>

<h3 id="多行注释">多行注释</h3>
<p>推荐下面的写法</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">ticket</span><span class="p">)</span> <span class="p">{</span>
    
    <span class="cm">/*
     * 如果买到车票了
     * 那么我就回家
     * 星号后面有一个空格
     * 注释上面有空行
     */</span>
    <span class="nx">goHome</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="使用注释">使用注释</h3>

<ul>
  <li>难于理解的代码</li>
  <li>可能被认为出错的代码</li>
  <li>浏览器特性hack</li>
</ul>

<h3 id="注释文档">注释文档</h3>
<p>可以通过注释生成文档</p>

<ul>
  <li>YUIDoc</li>
  <li>JSDoc Toolkit</li>
</ul>

<h2 id="3语句和表达式">3、语句和表达式</h2>
<p>推荐下面写法</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code>
<span class="c1">//括号前面与后面有空格，花括号不要省略，并且不在一行</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">doSomethingElse</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">switch</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s2">"first"</span><span class="p">:</span>
    <span class="k">case</span> <span class="s2">"second"</span><span class="p">:</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s2">"third"</span><span class="p">:</span>
        <span class="nx">doAnotherThing</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
        <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>
</div>

<p>with语句禁止使用！</p>

<h2 id="4变量函数和运算符">4、变量、函数和运算符</h2>


    </div>


</article>
</main>
<aside class="tools-side">
    <div class="search">
        <script type="text/javascript">(function() {
            document.write(unescape("%3Cdiv id=\"bdcs\"%3E%3C/div%3E"));
            var bdcs = document.createElement("script");
            bdcs.type = "text/javascript";
            bdcs.async = true;
            bdcs.src = "http://znsv.baidu.com/customer_search/api/js?sid=15949286338864251999" + "&plate_url=" +
                       encodeURIComponent(window.location.href) + "&t=" + Math.ceil(new Date() / 3600000);
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bdcs, s);
        })();</script>
    </div>
</aside>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>

</html>